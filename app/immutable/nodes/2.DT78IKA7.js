import{t as j,a as I}from"../chunks/CPFDW1bW.js";import{i as We}from"../chunks/DW3nCLgv.js";import{p as Xe,s as d,f as Ye,e as Ze,u as s,g as f,r as c,i as ne,t as B,j as Ee,k as C,l as qe}from"../chunks/BrUV4KTp.js";import{e as h,s as oe}from"../chunks/Dey5Ezsi.js";import{e as R,i as J,P as we,g as et,b as tt,d as it,a as lt,t as st,r as w,s as Q,c as H,f as A,h as Fe}from"../chunks/DD0uYgO2.js";import{s as nt,a as S,b as m,c as D}from"../chunks/Bw2fyDt6.js";import{o as ot,w as U}from"../chunks/DChc3i_k.js";var at=j('<option class="svelte-14snslo"> </option>'),dt=j('<div class="object history_item svelte-14snslo"><div class="history_item_fields svelte-14snslo"><input id="field1" class="history_item_field svelte-14snslo" placeholder="field1" disabled> <input id="field2" class="history_item_field svelte-14snslo" placeholder="field2" disabled> <input id="field3" class="history_item_field svelte-14snslo" placeholder="field3" disabled> <input id="field4" class="history_item_field history_item_field_small svelte-14snslo" placeholder="field4" disabled></div> <input class="button history_item_use svelte-14snslo" type="button" value="use"> <input class="button history_item_delete svelte-14snslo" type="button" value="delete"></div>'),rt=j('<option class="svelte-14snslo"> </option>'),ct=j('<div class="object list_item svelte-14snslo"><div class="list_item_thumbnail svelte-14snslo"><img class="list_item_qrcode svelte-14snslo" src="./sampleqrcode.svg" alt="list item qrcode"> <img class="list_item_logo hidden svelte-14snslo" alt="list item logo"></div> <div class="list_item_fields svelte-14snslo"><input class="list_item_field svelte-14snslo"> <input class="list_item_field svelte-14snslo"> <input class="list_item_field svelte-14snslo"> <input class="list_item_field list_item_field_small svelte-14snslo"> <input class="list_item_field list_item_field_small svelte-14snslo"></div> <select id="count" class="button list_item_count svelte-14snslo"></select> <input class="button list_item_delete svelte-14snslo" type="button" value="delete"></div>'),ut=j('<option class="svelte-14snslo"> </option>'),ft=j('<div class="style_field svelte-14snslo"><select id="option_font" class="button style_option svelte-14snslo"></select> <input id="style_size" class="button style_option svelte-14snslo" type="number" step="0.25" min="0" max="100"></div>'),_t=j('<link rel="preconnect" href="https://fonts.googleapis.com" class="svelte-14snslo"> <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&amp;display=swap" rel="stylesheet" class="svelte-14snslo"> <div id="main_div" class="stretch svelte-14snslo"><div id="background_cover" class="stretch svelte-14snslo"></div> <div id="left_div" class="svelte-14snslo"><div id="input_container" class="container svelte-14snslo"><div id="input" class="object svelte-14snslo"><div id="input_thumbnail" class="svelte-14snslo"><input id="input_qrcode" type="image" src="./sampleqrcode.svg" alt="input qrcode" class="svelte-14snslo"> <div id="input_logo" class="hidden svelte-14snslo"><img id="input_logo_image" class="stretch svelte-14snslo" alt="input logo"> <input id="input_logo_button" type="file" accept="image/png, image/jpeg" class="svelte-14snslo"></div></div> <div id="input_fields" class="svelte-14snslo"><input id="input_field1" class="input_field svelte-14snslo" placeholder="field1"> <input id="input_field2" class="input_field svelte-14snslo" placeholder="field2"> <input id="input_field3" class="input_field svelte-14snslo" placeholder="field3"> <input id="input_field4" class="input_field input_field_small svelte-14snslo" placeholder="field4"> <input id="input_field5" class="input_field input_field_small svelte-14snslo" placeholder="field5"></div> <select id="input_count" class="button svelte-14snslo"></select> <input id="input_add" class="button svelte-14snslo" type="button" value="add"></div></div> <div id="history_container" class="container svelte-14snslo"></div></div> <div id="right_div" class="svelte-14snslo"><div id="list_container" class="container svelte-14snslo"></div> <div id="output_container" class="container svelte-14snslo"><div id="output_main" class="object svelte-14snslo"><input id="output_submit" class="button svelte-14snslo" type="button" value="Submit!"> <input id="output_clear_list" class="button svelte-14snslo" type="button" value="Clear list"></div> <div id="output_other" class="object svelte-14snslo"><input id="output_options" class="button svelte-14snslo" type="button" value="Options"></div></div></div></div> <div id="options_div" class="stretch hidden svelte-14snslo"><div id="options_container" class="container svelte-14snslo"><div id="style" class="object svelte-14snslo"></div> <input id="option_font_button" class="button svelte-14snslo" type="file"> <div id="option_thumbnail" class="svelte-14snslo"><input id="option_thumbnail_range" class="button svelte-14snslo" type="range" max="1" step="1" value="0"> <div id="option_thumbnail_display" class="svelte-14snslo"></div></div> <div id="option_rotate" class="svelte-14snslo"><input id="option_rotate_range" class="button svelte-14snslo" type="range" max="270" step="90" value="0"> <div id="option_rotate_display" class="svelte-14snslo"></div></div> <input id="option_export_history" class="button svelte-14snslo" type="button" value="Export History" disabled> <input id="option_export_list" class="button svelte-14snslo" type="button" value="Export list" disabled> <input id="option_reset" class="button svelte-14snslo" type="button" value="Reset"> <input id="option_return" class="button svelte-14snslo" type="button" value="Return"></div></div>',1);function xt(Le,Oe){Xe(Oe,!1);const[M,Be]=nt(),E=()=>D(T,"$history",M),r=()=>D(b,"$list",M),u=()=>D(F,"$options",M),k=()=>D(z,"$fonts",M),n=()=>D(N,"$style",M),T=U({}),b=U({}),F=U({}),z=U({}),N=U({});let o;ot(()=>{localStorage.history?S(T,JSON.parse(localStorage.history)):S(T,{}),localStorage.list?S(b,JSON.parse(localStorage.list)):S(b,{}),localStorage.options?S(F,JSON.parse(localStorage.options)):S(F,{}),localStorage.fonts?S(z,JSON.parse(localStorage.fonts)):fetch("./Montserrat-Regular.ttf").then(t=>t.blob().then(i=>{const e=new FileReader;e.onload=function(){e.result&&typeof e.result=="string"&&S(z,{Montserrat:{data:e.result,fallback:!0}})},e.readAsDataURL(i)})),localStorage.style?S(N,JSON.parse(localStorage.style)):(["field1","field2","field3","field4","field5"].forEach(t=>{m(N,s(n)[t]={font_name:"Montserrat",field_height:3.5,underline:!1},s(n))}),["field4","field5"].forEach(t=>{m(N,s(n)[t].field_height=2.75,s(n))})),b.subscribe(t=>localStorage.list=JSON.stringify(t)),T.subscribe(t=>localStorage.history=JSON.stringify(t)),F.subscribe(t=>localStorage.options=JSON.stringify(t)),z.subscribe(t=>localStorage.fonts=JSON.stringify(t)),N.subscribe(t=>localStorage.style=JSON.stringify(t)),o={qrcode:document.getElementById("input_qrcode"),logo:document.getElementById("input_logo"),field1:document.getElementById("input_field1"),field2:document.getElementById("input_field2"),field3:document.getElementById("input_field3"),field4:document.getElementById("input_field4"),field5:document.getElementById("input_field5"),count:document.getElementById("input_count")},u().last_field5&&(o.field5.value=u().last_field5),u().logo&&(document.getElementById("input_logo_image").src=u().logo),u().use_logo&&(o.qrcode.classList.add("hidden"),o.logo.classList.remove("hidden"))});function Ne(){o.field5.value&&m(F,s(u).last_field5=o.field5.value,s(u));const t=o.field1.value+o.field2.value+o.field3.value+o.field4.value;let i=null;if(Object.entries(E()).forEach(([l,a])=>{a.field1+a.field2+a.field3+a.field4===t&&(i=a)}),!i){const l=Math.random().toString(16).substring(2,16);m(T,s(E)[l]={field1:o.field1.value,field2:o.field2.value,field3:o.field3.value,field4:o.field4.value},s(E))}let e;if(Object.entries(r()).forEach(([l,a])=>{a.field1+a.field2+a.field3+a.field4===t&&(e=[l,a])}),e){const l=Number(r()[e[0]].count)+Number(o.count.value);l<100?m(b,s(r)[e[0]].count=String(l),s(r)):m(b,s(r)[e[0]].count=String(99),s(r))}else{const l=Math.random().toString(16).substring(2,16);m(b,s(r)[l]={field1:o.field1.value,field2:o.field2.value,field3:o.field3.value,field4:o.field4.value,field5:o.field5.value,count:o.count.value},s(r))}o.field1.value="",o.field2.value="",o.field3.value="",o.field4.value=""}function ae(t){var i,e,l,a;(i=t.parentElement)!=null&&i.classList.contains("list_item")?(delete r()[(e=t.parentElement)==null?void 0:e.id],S(b,r())):(l=t.parentElement)!=null&&l.classList.contains("history_item")&&(delete E()[(a=t.parentElement)==null?void 0:a.id],S(T,E()))}function Ie(t){var e;const i=E()[(e=t.parentElement)==null?void 0:e.id];o.field1.value=i.field1,o.field2.value=i.field2,o.field3.value=i.field3,o.field4.value=i.field4}function je(){const t=prompt("Enter QR Code value",u().qrcode);t&&m(F,s(u).qrcode=t,s(u))}function ke(t){if(t.files){const i=t.files[0];if(i.size>5e6){alert("Image too large (>5MB)");return}if(i.type==="image/png"||i.type==="image/jpeg"){const e=new FileReader;e.onload=function(){if(e.result&&typeof e.result=="string"){const l=e.result;document.getElementById("input_logo_image").src=l,Object.entries(document.getElementsByClassName("list_item_logo")).forEach(([a,_])=>{_.src=l}),m(F,s(u).logo=l,s(u))}},e.readAsDataURL(i)}}}function Te(t){if(t.files){const i=t.files[0];if(i.size>2e6){alert("Font too large (>5MB)");return}else if(k()[i.name]){alert("Font already in list");return}if([".ttf",".otf",".woff",".woff2"].includes(i.name.slice(i.name.lastIndexOf("."),i.name.length))){const e=new FileReader;e.onload=function(){if(e.result&&typeof e.result=="string"){const l=e.result;m(z,s(k)[i.name]={data:l,fallback:!1},s(k))}},e.readAsDataURL(i)}}}function $e(t){var e,l,a,_;const i=t;if(i.inputType==="insertFromPaste"){let v=[];if((e=i.data)!=null&&e.includes(`
`))v=(l=i.data)==null?void 0:l.split(`
`);else if((a=i.data)!=null&&a.includes("	"))v=(_=i.data)==null?void 0:_.split("	");else return;o.field1.value="";for(let p in v.slice(0,5)){const q=[o.field1,o.field2,o.field3,o.field4,o.field5];v[p]&&(q[p].value=v[p])}}}function Re(t){const i=document.querySelectorAll("#input_qrcode, .list_item_qrcode"),e=document.querySelectorAll("#input_logo, .list_item_logo");t?(e.forEach(l=>{l.classList.remove("hidden")}),i.forEach(l=>{l.classList.add("hidden")})):(i.forEach(l=>{l.classList.remove("hidden")}),e.forEach(l=>{l.classList.add("hidden")})),m(F,s(u).use_logo=t,s(u))}async function Je(){const t={basePdf:{width:100,height:20,padding:[0,0,0,0]},schemas:[[{name:"qrcodeField",type:"qrcode",position:{x:2,y:2},width:16,height:16},{name:"logoField",type:"image",position:{x:2,y:2},width:16,height:16},{name:"textField1",type:"text",position:{x:20,y:.5},width:80,height:n().field1.field_height,fontName:n().field1.font_name,dynamicFontSize:{min:1,max:100,fit:"vertical"},underline:n().field1.underline},{name:"textField2",type:"text",position:{x:20,y:1+n().field1.field_height},width:80,height:n().field2.field_height,fontName:n().field2.font_name,dynamicFontSize:{min:1,max:100,fit:"vertical"},underline:n().field2.underline},{name:"textField3",type:"text",position:{x:20,y:1.5+n().field1.field_height+n().field2.field_height},width:80,height:n().field3.field_height,fontName:n().field3.font_name,dynamicFontSize:{min:1,max:100,fit:"vertical"},underline:n().field3.underline},{name:"textField4",type:"text",position:{x:20,y:2+n().field1.field_height+n().field2.field_height+n().field3.field_height},width:80,height:n().field4.field_height,fontName:n().field4.font_name,dynamicFontSize:{min:1,max:100,fit:"vertical"},underline:n().field4.underline},{name:"textField5",type:"text",position:{x:20,y:2.5+n().field1.field_height+n().field2.field_height+n().field3.field_height+n().field4.field_height},width:80,height:n().field5.field_height,fontName:n().field5.font_name,dynamicFontSize:{min:1,max:100,fit:"vertical"},underline:n().field5.underline}]]},i=await we.create();for(let a in Object.entries(r())){let _="",v="";!o.logo.classList.contains("hidden")&&u().logo?v=u().logo:!o.qrcode.classList.contains("hidden")&&u().qrcode&&(_=u().qrcode);const p=Object.entries(r())[a][1],q=[{qrcodeField:_,logoField:v,textField1:p.field1,textField2:p.field2,textField3:p.field3,textField4:p.field4,textField5:p.field5}],L=await et({template:t,inputs:q,plugins:{text:st,qrcode:tt.qrcode,image:lt},options:{font:k()}}),x=await we.load(L.buffer),y=(await i.copyPages(x,[0]))[0];u().rotation&&y.setRotation(it(u().rotation));for(let O=0;O<Number(p.count);O++)i.addPage(y)}const e=await i.save(),l=new Blob([e],{type:"application/pdf"});window.location.href=URL.createObjectURL(l)}We();var de=_t(),G=d(Ye(de),4),K=d(f(G),2),V=f(K),re=f(V),W=f(re),ce=f(W),ue=d(ce,2),Ae=d(f(ue),2);c(ue),c(W);var X=d(W,2),Me=f(X);ne(8),c(X);var Y=d(X,2);R(Y,4,()=>Array.from(Array(100).keys()).slice(1,100),J,(t,i)=>{var e=at(),l={},a=f(e,!0);c(e),B(_=>{l!==(l=_)&&(e.value=(e.__value=_)==null?"":_),oe(a,i)},[()=>String(i)],Ee),I(t,e)}),c(Y);var ze=d(Y,2);c(re),c(V);var fe=d(V,2);R(fe,5,()=>Object.entries(E()),J,(t,i)=>{let e=()=>C(i)[0];var l=dt(),a=f(l),_=f(a);w(_);var v=d(_,2);w(v);var p=d(v,2);w(p);var q=d(p,2);w(q),c(a);var L=d(a,2),x=d(L,2);c(l),B(()=>{Q(l,"id",e()),H(_,E()[e()].field1),H(v,E()[e()].field2),H(p,E()[e()].field3),H(q,E()[e()].field4)}),h("click",L,y=>Ie(y.currentTarget)),h("click",x,y=>ae(y.currentTarget)),I(t,l)}),c(fe),c(K);var _e=d(K,2),Z=f(_e);R(Z,5,()=>Object.entries(r()),J,(t,i)=>{let e=()=>C(i)[0];var l=ct(),a=f(l),_=f(a),v=d(_,2);c(a);var p=d(a,2),q=f(p);w(q);var L=d(q,2);w(L);var x=d(L,2);w(x);var y=d(x,2);w(y);var O=d(y,2);w(O),c(p);var $=d(p,2);B(()=>{r(),qe(()=>{e()})}),R($,4,()=>Array.from(Array(100).keys()).slice(1,100),J,(g,xe)=>{var P=rt(),Se={},Ve=f(P,!0);c(P),B(se=>{Se!==(Se=se)&&(P.value=(P.__value=se)==null?"":se),oe(Ve,xe)},[()=>String(xe)],Ee),I(g,P)}),c($);var Ke=d($,2);c(l),B(()=>{Q(l,"id",e()),Q(v,"src",u().logo)}),h("load",_,g=>{u().use_logo&&g.currentTarget.classList.add("hidden")}),h("load",v,g=>{u().use_logo&&g.currentTarget.classList.remove("hidden")}),A(q,()=>r()[e()].field1,g=>m(b,s(r)[e()].field1=g,s(r))),A(L,()=>r()[e()].field2,g=>m(b,s(r)[e()].field2=g,s(r))),A(x,()=>r()[e()].field3,g=>m(b,s(r)[e()].field3=g,s(r))),A(y,()=>r()[e()].field4,g=>m(b,s(r)[e()].field4=g,s(r))),A(O,()=>r()[e()].field5,g=>m(b,s(r)[e()].field5=g,s(r))),Fe($,()=>r()[e()].count,g=>m(b,s(r)[e()].count=g,s(r))),h("click",Ke,g=>ae(g.currentTarget)),I(t,l)}),c(Z);var ve=d(Z,2),ee=f(ve),pe=f(ee),Pe=d(pe,2);c(ee);var me=d(ee,2),De=f(me);c(me),c(ve),c(_e),c(G);var ge=d(G,2),he=f(ge),te=f(he);R(te,5,()=>Object.entries(n()),J,(t,i)=>{let e=()=>C(i)[0];var l=ft(),a=f(l);B(()=>{n(),qe(()=>{e(),k()})}),R(a,5,()=>Object.entries(k()),J,(v,p,q,L)=>{let x=()=>C(p)[0];var y=ut(),O={},$=f(y,!0);c(y),B(()=>{O!==(O=x())&&(y.value=(y.__value=x())==null?"":x()),oe($,x())}),I(v,y)}),c(a);var _=d(a,2);w(_),c(l),B(()=>Q(l,"id",`style_${e()??""}`)),Fe(a,()=>n()[e()].font_name,v=>m(N,s(n)[e()].font_name=v,s(n))),A(_,()=>n()[e()].field_height,v=>m(N,s(n)[e()].field_height=v,s(n))),I(t,l)}),c(te);var ye=d(te,2),ie=d(ye,2),Ue=f(ie);ne(2),c(ie);var le=d(ie,2),Ce=f(le);ne(2),c(le);var Qe=d(le,2),He=d(Qe,2),be=d(He,2),Ge=d(be,2);c(he),c(ge),h("click",ce,()=>je()),h("change",Ae,t=>ke(t.currentTarget)),h("input",Me,t=>$e(t)),h("click",ze,()=>Ne()),h("click",pe,()=>Je()),h("click",Pe,()=>{confirm("Clear list?")&&S(b,{})}),h("click",De,()=>{var t,i;(t=document.getElementById("main_div"))==null||t.classList.add("hidden"),(i=document.getElementById("options_div"))==null||i.classList.remove("hidden")}),h("change",ye,t=>Te(t.currentTarget)),h("input",Ue,t=>{let i=document.getElementById("option_thumbnail_display");i&&(t.currentTarget.value==="0"?i.innerText="qrcode":i.innerText="logo",Re(!!Number(t.currentTarget.value)))}),h("input",Ce,t=>{let i=document.getElementById("option_rotate_display");i&&(i.innerText=t.currentTarget.value),m(F,s(u).rotation=Number(t.currentTarget.value),s(u))}),h("click",be,()=>{confirm("Reset?")&&(localStorage.clear(),location.reload())}),h("click",Ge,()=>{var t,i;(t=document.getElementById("options_div"))==null||t.classList.add("hidden"),(i=document.getElementById("main_div"))==null||i.classList.remove("hidden")}),I(Le,de),Ze(),Be()}export{xt as component};
